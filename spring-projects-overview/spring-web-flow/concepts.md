# Concepts — Spring Web Flow

Spring Web Flow introduces a structured way to model user interaction as a **stateful conversation managed by a deterministic state machine**.

Understanding Web Flow requires shifting from a request-driven mindset to a **conversation-driven mindset**.

---

## Flow as a Conversation

A Flow represents a structured interaction between a user and the system.

Unlike a single HTTP request, a Flow:

- Spans multiple requests
- Maintains controlled state
- Follows predefined transitions

A flow begins when triggered and ends when it reaches an end state.

---

## State Machine Thinking

At its core, Spring Web Flow is a state machine.

Each flow consists of:

- States
- Events
- Transitions

At any given time:

- The flow is in exactly one active state.
- Only valid transitions from that state are allowed.

This eliminates implicit navigation logic.

---

## State Types

Spring Web Flow defines several types of states.

### View State

Represents:

- A rendered page
- User input step

Waits for user interaction before transitioning.

---

### Action State

Executes business logic.

Used to:

- Call services
- Modify flow data
- Decide next transition

Does not render a view.

---

### Decision State

Evaluates conditions and determines the next state.

Used for:

- Conditional branching
- Validation outcomes
- Authorization checks

---

### Subflow State

Invokes another flow.

Encourages:

- Modularity
- Reusability
- Flow composition

---

### End State

Terminates the flow.

May:

- Return values
- Redirect
- Trigger post-flow actions

---

## Events

Events trigger transitions.

They are typically generated by:

- Form submissions
- Button clicks
- Programmatic signals

Events determine how the state machine moves forward.

---

## Transitions

A Transition defines:

- The source state
- The triggering event
- The target state

Transitions can include:

- Guards (conditions)
- Actions
- Security rules

Only declared transitions are allowed.

---

## Flow Scope

Data stored during a single flow execution.

Characteristics:

- Survives across multiple requests
- Cleared when the flow ends

Used for:

- Form backing objects
- Aggregated data
- Temporary conversational state

---

## Conversation Scope

Data shared across multiple flows in a single conversation.

Used for:

- Multi-flow workflows
- Parent-child flow coordination

---

## View Scope

Data tied to a specific rendered view.

Useful for:

- Partial page updates
- Temporary UI state

---

## Flow Execution

A Flow Execution is a running instance of a flow.

It contains:

- Current state
- Scoped data
- Execution history

Multiple executions may coexist for a single user.

---

## Subflows

Subflows allow one flow to call another.

Benefits:

- Encapsulation
- Reusability
- Hierarchical interaction modeling

The parent flow waits until the subflow completes.

---

## Flow Lifecycle

1. Flow is launched
2. Initial state is entered
3. User interaction triggers events
4. Transitions move between states
5. Flow reaches end state
6. Execution is terminated

Flow lifecycle is explicitly managed by the FlowExecutor.

---

## Mental Model

Spring Web Flow replaces:

> “Controller methods deciding where to go next”

With:

> “A deterministic state machine controlling navigation”

This improves:

- Predictability
- Maintainability of complex interactions
- Separation between navigation logic and business logic

But introduces:

- Stateful server dependency
- Increased architectural rigidity

---

## Conceptual Summary

Think of Spring Web Flow as:

- A structured conversation manager
- A deterministic state machine
- A navigation orchestration engine for server-rendered applications

It is not:

- A REST framework
- A reactive system
- A client-side routing solution

---

Part of **Spring Projects Overview**
within **Everything About Spring Framework**
by *The Coding Cabin*